import{o as _}from"./index-34dc9a5e.js";import{A as h,r as d,j as z,L as v,M as P,I as f,K as i,z as b,n as k,F as D}from"./@vue-f3b292d9.js";import{u as x,s as S}from"./naive-ui-8dcb3f34.js";import{P as w}from"./index-89e12f42.js";import{_ as F}from"./index-2e290413.js";const q=({checkedRowKeys:n,fetchData:t})=>{const a=h({prefix:o=>`共 ${o.itemCount} 条`,page:1,pageSize:10,itemCount:1,showQuickJumper:!0,showSizePicker:!0,pageSizes:[10,20,30,40],onUpdatePage:o=>{n.value=[],a.page=o,t()},onUpdatePageSize:o=>{a.pageSize=o,t()}});return{pagination:a}},B=({searchParam:n,searchList:t,fetchData:a})=>({search:()=>{const e={};for(const s in t)if(t[s].value)if(t[s].key==="time"){const[r,c]=[...t[s].value];e.beginDate=r,e.endDate=c}else e[s]=t[s].value;n.value=e,a(e)},reset:()=>{for(const e in t)t[e].value=null;a()},noSideSpace:e=>!e.startsWith(" ")&&!e.endsWith(" ")}),C=n=>{const t=x(),a=d(!1),o=d([]),u=d([]),p=d({}),e=async c=>{try{a.value=!0;const{data:l,code:g,msg:m,total:y}=await n.query({pageNum:r.page,pageSize:r.pageSize,...c});g===200?(r.itemCount=y,o.value=l,a.value=!1):t.error(m)}catch(l){a.value=!1,console.error(l)}},s=()=>{e()},{pagination:r}=q({checkedRowKeys:u,fetchData:e});return{loading:a,tableData:o,fetchData:e,refresh:s,pagination:r,...B({searchParam:p,searchList:n.searchList,fetchData:e})}};const K={__name:"index",props:{...S.props,query:{type:Function,default:()=>null},rowKey:{type:Function,default:()=>()=>"id"},searchList:{type:Object,default:()=>null},formSize:{type:String,default:()=>"large"},striped:{type:Boolean,default:()=>!0},size:{type:String,default:()=>"large"}},setup(n,{expose:t}){const a=n,o=z(()=>_(a,["query","searchList","formSize"])),{loading:u,tableData:p,fetchData:e,pagination:s,search:r,reset:c,noSideSpace:l}=C(a);return e(),t({fetchData:e}),(g,m)=>(v(),P(D,null,[f(w,{searchList:a.searchList,formSize:n.formSize,noSideSpace:i(l),onReset:i(c),onSearch:i(r)},null,8,["searchList","formSize","noSideSpace","onReset","onSearch"]),b(g.$slots,"operation",{},void 0,!0),f(i(S),k(i(o),{loading:i(u),data:i(p),pagination:i(s)}),null,16,["loading","data","pagination"])],64))}},L=F(K,[["__scopeId","data-v-7a9e36c9"]]);export{L as P};
